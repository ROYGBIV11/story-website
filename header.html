<!-- This is the version of the header.html file that is imported into all other pages. -->

<!doctype html>
<!-- Stores the nav bar links generated by the script below. -->
<nav id="nav">
</nav>
<!-- I have opted to use script tags for the generation of nav bar HTML instead of an external JavaScript file as they ensure that the code doesn't run until after the HTML is loaded and there isn't enough HTML in this file for it to be worth creating a separate file for the JavaScript. -->
<script>
    
    //Instead of having the HTML written out, I have chosen to create a script that generates the HTML. The reason I did this is for the convenience of developers who have to add or remove links. Instead of writing a new line of HTML, all they have to do is put the name of the file in the fileNames array and the name of the page in the pageNames array. 
    
    //fileNames and pageNames make up a multi-dimensional array. The page name and file name with the same index number belong to the same web page. The last few pages (exact number defined by numPagesFloatRight) are to be floated to the right.
    //fileNames stores the name of the file of every web page.
    var fileNames = ["index.html", "story1.html", "story2.html", "story3.html", "story4.html", "story5.html", "resources.html"];
    //pageNames stores the title of every web page. This is the text that the user will see on the navigation bar.
    var pageNames = ["Home", "The Night", "The Frog Prince", "The Cat, the Partridge and the Hare", "The Spectacles", "Mad Libs", "Resources"];
    //The nav bar links related to the last entries in the fileNames/pageNames arrays will be floated to the right. numPagesFloatRight controls how many of them will be floated to the right.
    var numPagesFloatRight = 1;
    
    //Stores the ID of the active link for use in other JavaScript.
    var linkId = "";
    
    //generateLinks() must come before selectActive() because if they are the other way around, the code will attempt to make a link active before it's there, which may lead to errors.
    generateLinks();
    selectActive();
    
    //Generates an unordered list of links that lead to the most relevant (i.e. all) pages of the website. These links are the contents of the navigation bar.
    function generateLinks () {
        //New HTML is accumulated in the variable navCode. It's stored as an unordered list, so it stars with <ul>.
        var navCode = "<ul>";
        //This for loop creates a list item for every entry in the fileNames/pageNames arrays, which means there is a link to every page on the website.
        for (var i = 0; i < fileNames.length; i++) {
            //Every list item is given an ID that is identical to all the others except for the number, which is its index number (e.g. home is "link0", the first story is "link1"). This will make it easy for selectActive() to identify the link associated with every page.
            navCode += "<li id=link" + i;
            //This if statement checks if an element is close enough to the end of the fileNames/pageNames array to be floated to the right and adds a class for that purpose if it is.
            if (i > fileNames.length - 1 - numPagesFloatRight) {
                navCode += " class=floatRight"
            }
            //fileNames[i] contains the destination of the 'i'th link, while pageNames[i] contains the text that should be shown to the user for that same link. They are used so this same code can be used repeatedly for each page.
            navCode += " ><a href=" + fileNames[i] + ">" + pageNames[i] + "</a></li>";
        }
        //Ends the list, now that all items have been added.
        navCode += "</ul>";
        //Replaces the HTML in the (empty) nav tag with the newly generated list of links that make up the navigation bar.
        document.getElementById("nav").innerHTML = navCode;
    }
    
    //Determines which page of the website is currently being used and adds the 'active' class to its corresponding nav bar list item so it may be highlighted using CSS. If it doesn't have a corresponding nav bar list item, nothing on the nav bar will be active.
    function selectActive () {
        //Stores the file name of the current page.
        var fileName = findFileName();
        //Compares the file name of the current page to all the other pages whose links are on the navigation bar. If it is one of these pages, its link is given the 'active' class.
        for (var i = 0; i < fileNames.length; i++) {
            if (fileName == fileNames[i]) {
                document.getElementById("link" + i).classList.add("active");
                linkId = "link" + i;
            }
        }
    }
    
    //Takes the location of page and truncates it to solely include the file's name (including .html), as that is the part that is stored in the fileNames array (which is important for comparing elements of fileNames to it) and doesn't change as the location of the website's folder changes.
    function findFileName () {
        //Stores the location of the page as a variable.
        var fileName = location.pathname;
        //Checks every character (starting from the last and moving towards the first) until it finds a slash. A substring that only includes characters after the last slash is returned.
        for (i = fileName.length; i >= 0; i--) {
            if (fileName[i] == "/") {
                fileName = fileName.substr(i + 1, fileName.length - i);
                return fileName;
            }
        }
        //If no slash is present (which is unlikely), it is assumed that no truncation is necessary.
        return fileName;
    }
    
</script>
